import{p as I,g as C,f as k,d as s,ar as L,u as q,x as E,j as d,B as K,h as B,i as M,T as U,F as G,m as A,aa as S,o as H,c as J,a as V,w as D,al as Q,as as W,e as X,t as Y}from"./index-82bfa631.js";import{_ as Z}from"./_plugin-vue_export-helper-c27b6911.js";import{l as ee,b as R,f as te,g as ne,j as ae,c as le,e as oe,a as se}from"./forwardRefs-10f70314.js";import{i as ie,j as ue,m as re,b as ce,c as de,d as ve}from"./form-a42eefca.js";const fe="/canteen/assets/icon-510eab34.svg",me="/canteen/assets/logo__navbar-a6fda250.svg",_e=I({...ee(),...ie()},"VForm"),pe=C()({name:"VForm",props:_e(),emits:{"update:modelValue":e=>!0,submit:e=>!0},setup(e,v){let{slots:p,emit:y}=v;const a=ue(e),g=k();function m(f){f.preventDefault(),a.reset()}function x(f){const l=f,c=a.validate();l.then=c.then.bind(c),l.catch=c.catch.bind(c),l.finally=c.finally.bind(c),y("submit",l),l.defaultPrevented||c.then(h=>{var o;let{valid:F}=h;F&&((o=g.value)==null||o.submit())}),l.preventDefault()}return R(()=>{var f;return s("form",{ref:g,class:["v-form",e.class],style:e.style,novalidate:!0,onReset:m,onSubmit:x},[(f=p.default)==null?void 0:f.call(p,a)])}),te(a,g)}});const ge=I({autofocus:Boolean,divider:String,focusAll:Boolean,label:{type:String,default:"$vuetify.input.otp"},length:{type:[Number,String],default:6},modelValue:{type:[Number,String],default:void 0},placeholder:String,type:{type:String,default:"number"},...ne(),...re(),...L(ce({variant:"outlined"}),["baseColor","bgColor","class","color","disabled","error","loading","rounded","style","theme","variant"])},"VOtpInput"),he=C()({name:"VOtpInput",props:ge(),emits:{finish:e=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,v){let{attrs:p,emit:y,slots:a}=v;const{dimensionStyles:g}=ae(e),{isFocused:m,focus:x,blur:f}=de(e),l=q(e,"modelValue","",t=>String(t).split(""),t=>t.join("")),{t:c}=E(),h=d(()=>Number(e.length)),F=d(()=>Array(h.value).fill(0)),o=k(-1),w=k(),_=k([]),P=d(()=>_.value[o.value]);function $(){if(e.type==="number"&&/[^0-9]/g.test(P.value.value)){P.value.value="";return}const t=l.value.slice(),n=P.value.value;t[o.value]=n;let i=null;o.value>l.value.length?i=l.value.length+1:o.value+1!==h.value&&(i="next"),l.value=t,i&&S(w.value,i)}function N(t){const n=l.value.slice(),i=o.value;let u=null;["ArrowLeft","ArrowRight","Backspace","Delete"].includes(t.key)&&(t.preventDefault(),t.key==="ArrowLeft"?u="prev":t.key==="ArrowRight"?u="next":["Backspace","Delete"].includes(t.key)&&(n[o.value]="",l.value=n,o.value>0&&t.key==="Backspace"?u="prev":requestAnimationFrame(()=>{var r;(r=_.value[i])==null||r.select()})),requestAnimationFrame(()=>{u!=null&&S(w.value,u)}))}function j(t,n){var i,u;n.preventDefault(),n.stopPropagation(),l.value=(((i=n==null?void 0:n.clipboardData)==null?void 0:i.getData("Text"))??"").split(""),(u=_.value)==null||u[t].blur()}function O(){l.value=[]}function T(t,n){x(),o.value=n}function z(){f(),o.value=-1}return K({VField:{color:d(()=>e.color),bgColor:d(()=>e.color),baseColor:d(()=>e.baseColor),disabled:d(()=>e.disabled),error:d(()=>e.error),variant:d(()=>e.variant)}},{scoped:!0}),B(l,t=>{t.length===h.value&&y("finish",t.join(""))},{deep:!0}),B(o,t=>{t<0||M(()=>{var n;(n=_.value[t])==null||n.select()})}),R(()=>{var i;const[t,n]=U(p);return s("div",A({class:["v-otp-input",{"v-otp-input--divided":!!e.divider},e.class],style:[e.style]},t),[s("div",{ref:w,class:"v-otp-input__content",style:[g.value]},[F.value.map((u,r)=>s(G,null,[e.divider&&r!==0&&s("span",{class:"v-otp-input__divider"},[e.divider]),s(ve,{focused:m.value&&e.focusAll||o.value===r,key:r},{...a,default:()=>s("input",{ref:b=>_.value[r]=b,"aria-label":c(e.label,r+1),autofocus:r===0&&e.autofocus,autocomplete:"one-time-code",class:["v-otp-input__field"],disabled:e.disabled,inputmode:e.type==="number"?"numeric":"text",min:e.type==="number"?0:void 0,maxlength:"1",placeholder:e.placeholder,type:e.type==="number"?"text":e.type,value:l.value[r],onInput:$,onFocus:b=>T(b,r),onBlur:z,onKeydown:N,onPaste:b=>j(r,b)},null)})])),s("input",A({class:"v-otp-input-input",type:"hidden"},n,{value:l.value.join("")}),null),s(le,{contained:!0,"content-class":"v-otp-input__loader","model-value":!!e.loading,persistent:!0},{default:()=>{var u;return[((u=a.loader)==null?void 0:u.call(a))??s(oe,{color:typeof e.loading=="boolean"?void 0:e.loading,indeterminate:!0,size:"24",width:"2"},null)]}}),(i=a.default)==null?void 0:i.call(a)])])}),{blur:()=>{var t;(t=_.value)==null||t.some(n=>n.blur())},focus:()=>{var t;(t=_.value)==null||t[0].focus()},reset:O,isFocused:m}}}),be={data(){return{loading:!1,pin_code:"",signInInn:!0,signInEcp:!1,iin:"010101010101",password:"123456",show:!1}},methods:{async login(){try{await this.$store.dispatch("login",{pin_code:this.pin_code}),this.$router.push("/")}catch(e){console.error(e),alert(this.$t("authorization__alert"))}},handleBlur(){this.$nextTick(()=>{this.$refs.input__pincode.focus()})}},mounted(){this.handleBlur()}},ye={class:"section__login"},Ve={class:"wrapper"},ke=W('<div class="section__login__logo"><div class="section__login__logo__icon"><img src="'+fe+'" alt=""></div><div class="section__login__logo__smart"><img src="'+me+'" alt=""></div></div>',1),xe={class:"section__login__form"},Fe={class:"text-center"},we={class:"section__login__action",style:{padding:"20px 40px"}};function Pe(e,v,p,y,a,g){return H(),J("div",ye,[V("div",Ve,[ke,V("div",xe,[s(pe,{onSubmit:v[1]||(v[1]=Q(m=>this.login(),["prevent"]))},{default:D(()=>[V("div",Fe,[s(he,{modelValue:a.pin_code,"onUpdate:modelValue":v[0]||(v[0]=m=>a.pin_code=m),loading:a.loading,length:"4",variant:"underlined",ref:"input__pincode"},null,8,["modelValue","loading"])]),V("div",we,[s(se,{class:"section__login__submit regular__btn blue",variant:"tonal",type:"submit",disabled:a.pin_code.length<4||a.loading},{default:D(()=>[X(Y(e.$t("authorization__enter")),1)]),_:1},8,["disabled"])])]),_:1})])])])}const Ie=Z(be,[["render",Pe]]);export{Ie as default};
